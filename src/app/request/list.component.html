<h1>Requests</h1>
<p>
  <a routerLink="add" class="btn btn-sm btn-primary mb-2">Add Request</a>
</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th style="width: 15%">Type</th>
      <th style="width: 20%">Employee</th>
      <th style="width: 25%">Items</th>
      <th style="width: 15%">Status</th>
      <th style="width: 15%">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let req of requests">
      <td>{{ req.type || '—' }}</td>
      <!-- ✅ show employeeId instead of account email -->
      <td>
  {{ req.employee?.account?.email || '—' }}
  <span *ngIf="req.employee?.account?.status !== 'Active'"> (Inactive)</span>
</td>
      <td>{{ req.items || '—' }}</td>
      <td>
        <span 
          class="badge"
          [ngClass]="{
            'bg-success': req.status === 'Approved',
            'bg-warning': req.status === 'Pending',
            'bg-danger': req.status === 'Rejected'
          }">
          {{ req.status }}
        </span>
      </td>
      <td style="white-space: nowrap">
      <a [routerLink]="['/requests/edit', req.id]" class="btn btn-sm btn-primary">
        Edit
      </a>

      <!-- <a [routerLink]="['/admin/workflows', req.employee?.employeeId]" 
        class="btn btn-sm btn-outline-secondary ms-1">
        Workflows
      </a> -->
    </td>
    </tr>

    <!-- Loading spinner -->
    <tr *ngIf="!requests || requests.length === 0">
      <td colspan="5" class="text-center">
        <span class="spinner-border spinner-border-lg align-center"></span>
      </td>
    </tr>

    <tr *ngIf="!loading && requests.length === 0">
    <td colspan="5" class="text-center">No requests found</td>
   </tr>

  </tbody>
</table>
